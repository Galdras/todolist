<!DOCTYPE html>
<html>
<head>
	<title></title>
</head>
<body ng-app="comment">

	<div ng-view></div>

	<script src="node_modules/angular/angular.min.js"></script>
	<script src="node_modules/angular-route/angular-route.min.js"></script>
	<script>

		var app = angular.module('comment', ['ngRoute']);

		app.config( function($routeProvider) {
			$routeProvider
				.when('/',         {templateUrl: 'partials/home.html',
									controller : 'postCtrl'})
				.when('/comments/:id', {templateUrl: 'partials/comments.html',
									controller: 'commentCtrl'})
				.otherwise(        {redirectTo : '/'});
		}) ;

		app.factory('postFactory', function(){
			var factory = {
				posts : [
				  {
				    "id": 0,
				    "name": "Protodyne",
				    "content": "pariatur labore reprehenderit officia dolor tempor",
				    "comments": [
				      {
				        "username": "Lambert",
				        "city": "Summerset",
				        "email": "lambertpate@protodyne.com",
				        "content": "nostrud ea ex occaecat laborum"
				      },
				      {
				        "username": "Briggs",
				        "city": "Sanford",
				        "email": "briggspate@protodyne.com",
				        "content": "labore labore irure ipsum non"
				      },
				      {
				        "username": "Carla",
				        "city": "Eagleville",
				        "email": "carlapate@protodyne.com",
				        "content": "duis irure enim est exercitation"
				      }
				    ]
				  },
				  {
				    "id": 1,
				    "name": "Enomen",
				    "content": "ut labore dolor duis esse dolore",
				    "comments": [
				      {
				        "username": "Gay",
				        "city": "Lacomb",
				        "email": "gaypate@enomen.com",
				        "content": "mollit cupidatat ex tempor laboris"
				      },
				      {
				        "username": "Herring",
				        "city": "Northchase",
				        "email": "herringpate@enomen.com",
				        "content": "aliqua tempor nostrud fugiat amet"
				      }
				    ]
				  },
				  {
				    "id": 2,
				    "name": "Geeknet",
				    "content": "ex ea irure consectetur deserunt enim",
				    "comments": [
				      {
				        "username": "Elinor",
				        "city": "Fedora",
				        "email": "elinorpate@geeknet.com",
				        "content": "anim sint et amet minim"
				      }
				    ]
				  },
				  {
				    "id": 3,
				    "name": "Prowaste",
				    "content": "ad ad anim ex deserunt dolor",
				    "comments": [
				      {
				        "username": "Cathy",
				        "city": "Frierson",
				        "email": "cathypate@prowaste.com",
				        "content": "est enim minim ex culpa"
				      },
				      {
				        "username": "Everett",
				        "city": "Tryon",
				        "email": "everettpate@prowaste.com",
				        "content": "commodo occaecat eiusmod cupidatat qui"
				      }
				    ]
				  },
				  {
				    "id": 4,
				    "name": "Scentric",
				    "content": "adipisicing quis aliqua laboris aliqua consectetur",
				    "comments": [
				      {
				        "username": "Cole",
				        "city": "Denio",
				        "email": "colepate@scentric.com",
				        "content": "sint aute quis do anim"
				      }
				    ]
				  },
				  {
				    "id": 5,
				    "name": "Isoplex",
				    "content": "laboris commodo consequat in irure voluptate",
				    "comments": [
				      {
				        "username": "Ferguson",
				        "city": "Soham",
				        "email": "fergusonpate@isoplex.com",
				        "content": "non officia culpa esse Lorem"
				      },
				      {
				        "username": "Rocha",
				        "city": "Genoa",
				        "email": "rochapate@isoplex.com",
				        "content": "occaecat ad eiusmod ex nostrud"
				      }
				    ]
				  },
				  {
				    "id": 6,
				    "name": "Zilidium",
				    "content": "anim mollit sint eu aliqua ipsum",
				    "comments": [
				      {
				        "username": "Dominguez",
				        "city": "Norfolk",
				        "email": "dominguezpate@zilidium.com",
				        "content": "do voluptate pariatur laboris incididunt"
				      },
				      {
				        "username": "Kellie",
				        "city": "Kenwood",
				        "email": "kelliepate@zilidium.com",
				        "content": "consequat officia ea id ut"
				      }
				    ]
				  }
				],
				getPosts : function() {
					return factory.posts;
				},
				getPost : function(id) {
					var post = {} ;
					angular.forEach(factory.posts, function(value,key) {
						if(value.id == id)
							post = value ;
					});
					return post ;
				}
			} ;
			return factory;
		}) ;

		app.controller('postCtrl', function($scope, postFactory){
			$scope.posts = postFactory.getPosts() ;
		}) ;

		app.controller('commentCtrl', function($scope, postFactory, $routeParams){
			var post = postFactory.getPost($routeParams.id) ;
			$scope.title = post.name ;
			$scope.comments = post.comments ;
		}) ;

	</script>
</body>
</html>